<h2>Stocks</h2>
<p>Search Stock by Symbol! The result will be listed here!</p>
<input id="searchbar" type="text" placeholder="Search">
<ul id='movie-list'></ul>

<script>
  $(document).ready(function() {
      function parseString(str) {
          var temp = str.split(" ");
          var retStr = "";

          for (var i = 0; i < temp.length; i++) {
            retStr += temp[i].charAt(0).toUpperCase() + temp[i].substring(1) + " ";
          }

          return retStr.substring(0, retStr.length - 1);
      }

      var input = document.getElementById("searchbar");
      var movie_list = $('#movie-list'); // stock list
      var apikey = "RDGNO0SXDIJ85QUQ"; // api key
      var url = " ";

      input.addEventListener("keyup", function(e) {
        if (e.keyCode == 13) { // toggle upon pressing the enter key
          e.preventDefault(); // prevent default behavior
          movie_info_list.length = 0;

          // search by stock symbol
          var movie_title = parseString(input.value);
          url = "https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=" + movie_title + "&interval=5min&apikey=" + apikey;

          $.ajax({
            url: url,
            type: "GET",
            data: {
              "$limit" : 5000,
              "$$app_token" : apikey
            }
          }).done(function(data) {
            console.log(data);
            $.each(data, function(i, d) {
              movie_list.append('<li><div class="movie-card">'
                + "<h5>Stock Symbol: " + d['Meta Data']['2. Symbol'] + "</h5>"
                + "<p>Obtained: " + d.Information + "</p>"
                + "<p>"
                + '</div></li>');
              movie_info_list.push(d);
              location_list.push(d.location);
            });
          });
        }
      });
  });
</script>

<style>
  .movie-card {
    padding-top: 50px;
  }
</style>
